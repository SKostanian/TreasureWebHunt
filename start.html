<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Start</title>
    <script src="js/cookies.js"></script>
</head>
<body>
<div class="div_name">
  <input type="text" id="visitor_name" placeholder="Your Name" required>
  <button onclick="start()">Submit</button>
</div>

<script>

    const visitorNameElement = document.getElementById("visitor_name");

    function start() {
        let playerName = visitorNameElement.value;
        const appName = "Group-B1-App";
        const params = new URLSearchParams(location.search);
        let treasureHuntID = params.get("treasure-hunt-id");
        fetch(`https://codecyprus.org/th/api/start?player=${playerName}&app=${appName}&treasure-hunt-id=${treasureHuntID}`)
            .then(response => response.json())
            .then(jsonObject => {
                console.log(jsonObject);
                if (jsonObject.status === "OK") {
                    let sessionID = jsonObject.session;
                    setCookie("sessionID", sessionID);
                    location.href = "question.html";
                }
                else {
                    alert(jsonObject.errorMessages);
                }
            });
    }

</script>

</body>
</html>